{
  "id": "doc_032",
  "title": "F-score",
  "url": "https://en.wikipedia.org/wiki/F-score",
  "topic": "F-score",
  "content": "In statistical analysis of binary classification and information retrieval systems, the F-score or F-measure is a measure of predictive performance. It is calculated from the precision and recall of the test, where the precision is the number of true positive results divided by the number of all samples predicted to be positive, including those not identified correctly, and the recall is the number of true positive results divided by the number of all samples that should have been identified as positive. Precision is also known as positive predictive value, and recall is also known as sensitivity in diagnostic binary classification.\nThe F1 score is the harmonic mean of the precision and recall. It thus symmetrically represents both precision and recall in one metric. The more generic \n  \n    \n      \n        \n          F\n          \n            β\n          \n        \n      \n    \n    {\\displaystyle F_{\\beta }}\n  \n score applies additional weights, valuing one of precision or recall more than the other.\nThe highest possible value of an F-score is 1.0, indicating perfect precision and recall, and the lowest possible value is 0, if the precision or the recall is zero.\n\n\n== Etymology ==\nThe name F-measure is believed to be named after a different F function in Van Rijsbergen's book, when introduced to the Fourth Message Understanding Conference (MUC-4, 1992).\n\n\n== Definition ==\nThe traditional F-measure or balanced F-score (F1 score) is the harmonic mean of precision and recall:\n\n  \n    \n      \n        \n          F\n          \n            1\n          \n        \n        =\n        \n          \n            2\n            \n              \n                \n                  r\n                  e\n                  c\n                  a\n                  l\n                  l\n                \n                \n                  −\n                  1\n                \n              \n              +\n              \n                \n                  p\n                  r\n                  e\n                  c\n                  i\n                  s\n                  i\n                  o\n                  n\n                \n                \n                  −\n                  1\n                \n              \n            \n          \n        \n        =\n        2\n        \n          \n            \n              \n                p\n                r\n                e\n                c\n                i\n                s\n                i\n                o\n                n\n              \n              ⋅\n              \n                r\n                e\n                c\n                a\n                l\n                l\n              \n            \n            \n              \n                p\n                r\n                e\n                c\n                i\n                s\n                i\n                o\n                n\n              \n              +\n              \n                r\n                e\n                c\n                a\n                l\n                l\n              \n            \n          \n        \n        =\n        \n          \n            \n              2\n              \n                T\n                P\n              \n            \n            \n              2\n              \n                T\n                P\n              \n              +\n              \n                F\n                P\n              \n              +\n              \n                F\n                N\n              \n            \n          \n        \n      \n    \n    {\\displaystyle F_{1}={\\frac {2}{\\mathrm {recall} ^{-1}+\\mathrm {precision} ^{-1}}}=2{\\frac {\\mathrm {precision} \\cdot \\mathrm {recall} }{\\mathrm {precision} +\\mathrm {recall} }}={\\frac {2\\mathrm {TP} }{2\\mathrm {TP} +\\mathrm {FP} +\\mathrm {FN} }}}\n  \n\nWith precision = TP / (TP + FP) and recall = TP / (TP + FN), it follows that the numerator of F1 is the sum of their numerators and the denominator of F1 is the sum of their denominators.\nIf FP=FN\n\n  \n    \n      \n        \n          F\n          \n            1\n          \n        \n        =\n        \n          \n            \n              2\n              \n                T\n                P\n              \n            \n            \n              2\n              \n                T\n                P\n              \n              +\n              2\n              \n                F\n                P\n              \n            \n          \n        \n        =\n        \n          \n            \n              T\n              P\n            \n            \n              \n                T\n                P\n              \n              +\n              \n                F\n                P\n              \n            \n          \n        \n      \n    \n    {\\displaystyle F_{1}={\\frac {2\\mathrm {TP} }{2\\mathrm {TP} +2\\mathrm {FP} }}={\\frac {\\mathrm {TP} }{\\mathrm {TP} +\\mathrm {FP} }}}\n  \n\nor\n\n  \n    \n      \n        \n          F\n          \n            1\n          \n        \n        =\n        \n          \n            \n              2\n              \n                T\n                P\n              \n            \n            \n              2\n              \n                T\n                P\n              \n              +\n              2\n              \n                F\n                N\n              \n            \n          \n        \n        =\n        \n          \n            \n              T\n              P\n            \n            \n              \n                T\n                P\n              \n              +\n              \n                F\n                N\n              \n            \n          \n        \n      \n    \n    {\\displaystyle F_{1}={\\frac {2\\mathrm {TP} }{2\\mathrm {TP} +2\\mathrm {FN} }}={\\frac {\\mathrm {TP} }{\\mathrm {TP} +\\mathrm {FN} }}}\n  \n\nSo, F1 = precision = recall\nIf TP=FP=FN\n\n  \n    \n      \n        \n          F\n          \n            1\n          \n        \n        =\n        \n          \n            \n              2\n              \n                T\n                P\n              \n            \n            \n              2\n              \n                T\n                P\n              \n              +\n              2\n              \n                F\n                P\n              \n            \n          \n        \n        =\n        \n          \n            \n              2\n              \n                T\n                P\n              \n            \n            \n              4\n              \n                T\n                P\n              \n            \n          \n        \n        =\n        \n          \n            1\n            2\n          \n        \n        =\n        0.5\n      \n    \n    {\\displaystyle F_{1}={\\frac {2\\mathrm {TP} }{2\\mathrm {TP} +2\\mathrm {FP} }}={\\frac {2\\mathrm {TP} }{4\\mathrm {TP} }}={\\frac {1}{2}}=0.5}\n  \n\nor \n\n  \n    \n      \n        \n          F\n          \n            1\n          \n        \n        =\n        \n          \n            \n              2\n              \n                T\n                P\n              \n            \n            \n              2\n              \n                T\n                P\n              \n              +\n              2\n              \n                F\n                N\n              \n            \n          \n        \n        =\n        \n          \n            \n              2\n              \n                T\n                P\n              \n            \n            \n              4\n              \n                T\n                P\n              \n            \n          \n        \n        =\n        \n          \n            1\n            2\n          \n        \n        =\n        0.5\n      \n    \n    {\\displaystyle F_{1}={\\frac {2\\mathrm {TP} }{2\\mathrm {TP} +2\\mathrm {FN} }}={\\frac {2\\mathrm {TP} }{4\\mathrm {TP} }}={\\frac {1}{2}}=0.5}\n  \n\nTo see it as a harmonic mean, note that \n  \n    \n      \n        \n          F\n          \n            1\n          \n          \n            −\n            1\n          \n        \n        =\n        \n          \n            1\n            2\n          \n        \n        (\n        \n          \n            r\n            e\n            c\n            a\n            l\n            l\n          \n          \n            −\n            1\n          \n        \n        +\n        \n          \n            p\n            r\n            e\n            c\n            i\n            s\n            i\n            o\n            n\n          \n          \n            −\n            1\n          \n        \n        )\n      \n    \n    {\\displaystyle F_{1}^{-1}={\\frac {1}{2}}(\\mathrm {recall} ^{-1}+\\mathrm {precision} ^{-1})}\n  \n. \n\n\n=== Fβ score ===\nA more general F score, \n  \n    \n      \n        \n          F\n          \n            β\n          \n        \n      \n    \n    {\\displaystyle F_{\\beta }}\n  \n, that uses a positive real factor \n  \n    \n      \n        β\n      \n    \n    {\\displaystyle \\beta }\n  \n, where \n  \n    \n      \n        β\n      \n    \n    {\\displaystyle \\beta }\n  \n is chosen such that recall is considered \n  \n    \n      \n        β\n      \n    \n    {\\displaystyle \\beta }\n  \n times as important as precision, is:\n\n  \n    \n      \n        \n          F\n          \n            β\n          \n        \n        =\n        \n          \n            \n              \n                β\n                \n                  2\n                \n              \n              +\n              1\n            \n            \n              (\n              \n                β\n                \n                  2\n                \n              \n              ⋅\n              \n                \n                  r\n                  e\n                  c\n                  a\n                  l\n                  l\n                \n                \n                  −\n                  1\n                \n              \n              )\n              +\n              \n                \n                  p\n                  r\n                  e\n                  c\n                  i\n                  s\n                  i\n                  o\n                  n\n                \n                \n                  −\n                  1\n                \n              \n            \n          \n        \n        =\n        \n          \n            \n              (\n              1\n              +\n              \n                β\n                \n                  2\n                \n              \n              )\n              ⋅\n              \n                p\n                r\n                e\n                c\n                i\n                s\n                i\n                o\n                n\n              \n              ⋅\n              \n                r\n                e\n                c\n                a\n                l\n                l\n              \n            \n            \n              (\n              \n                β\n                \n                  2\n                \n              \n              ⋅\n              \n                p\n                r\n                e\n                c\n                i\n                s\n                i\n                o\n                n\n              \n              )\n              +\n              \n                r\n                e\n                c\n                a\n                l\n                l\n              \n            \n          \n        \n      \n    \n    {\\displaystyle F_{\\beta }={\\frac {\\beta ^{2}+1}{(\\beta ^{2}\\cdot \\mathrm {recall} ^{-1})+\\mathrm {precision} ^{-1}}}={\\frac {(1+\\beta ^{2})\\cdot \\mathrm {precision} \\cdot \\mathrm {recall} }{(\\beta ^{2}\\cdot \\mathrm {precision} )+\\mathrm {recall} }}}\n  \n\nTo see that as a weighted harmonic mean, note that \n  \n    \n      \n        \n          F\n          \n            β\n          \n          \n            −\n            1\n          \n        \n        =\n        \n          \n            1\n            \n              β\n              +\n              \n                β\n                \n                  −\n                  1\n                \n              \n            \n          \n        \n        (\n        β\n        ⋅\n        \n          \n            r\n            e\n            c\n            a\n            l\n            l\n          \n          \n            −\n            1\n          \n        \n        +\n        \n          β\n          \n            −\n            1\n          \n        \n        ⋅\n        \n          \n            p\n            r\n            e\n            c\n            i\n            s\n            i\n            o\n            n\n          \n          \n            −\n            1\n          \n        \n        )\n      \n    \n    {\\displaystyle F_{\\beta }^{-1}={\\frac {1}{\\beta +\\beta ^{-1}}}(\\beta \\cdot \\mathrm {recall} ^{-1}+\\beta ^{-1}\\cdot \\mathrm {precision} ^{-1})}\n  \n.\nIn terms of Type I and type II errors this becomes:\n\n  \n    \n      \n        \n          F\n          \n            β\n          \n        \n        =\n        \n          \n            \n              (\n              1\n              +\n              \n                β\n                \n                  2\n                \n              \n              )\n              ⋅\n              \n                T\n                P\n              \n            \n            \n              (\n              1\n              +\n              \n                β\n                \n                  2\n                \n              \n              )\n              ⋅\n              \n                T\n                P\n              \n              +\n              \n                β\n                \n                  2\n                \n              \n              ⋅\n              \n                F\n                N\n              \n              +\n              \n                F\n                P\n              \n            \n          \n        \n        \n        =\n        \n          \n            \n              (\n              1\n              +\n              \n                β\n                \n                  2\n                \n              \n              )\n              ⋅\n              \n                T\n                P\n              \n            \n            \n              (\n              \n                T\n                P\n              \n              +\n              \n                F\n                N\n              \n              )\n              ⋅\n              \n                β\n                \n                  2\n                \n              \n              +\n              (\n              \n                T\n                P\n              \n              +\n              \n                F\n                P\n              \n              )\n            \n          \n        \n        \n      \n    \n    {\\displaystyle F_{\\beta }={\\frac {(1+\\beta ^{2})\\cdot \\mathrm {TP} }{(1+\\beta ^{2})\\cdot \\mathrm {TP} +\\beta ^{2}\\cdot \\mathrm {FN} +\\mathrm {FP} }}\\,={\\frac {(1+\\beta ^{2})\\cdot \\mathrm {TP} }{(\\mathrm {TP} +\\mathrm {FN} )\\cdot \\beta ^{2}+(\\mathrm {TP} +\\mathrm {FP} )}}\\,}\n  \n\nTwo commonly used values for \n  \n    \n      \n        β\n      \n    \n    {\\displaystyle \\beta }\n  \n are 2, which weighs recall higher than precision, and 1/2, which weighs recall lower than precision.\nThe F-measure was derived so that \n  \n    \n      \n        \n          F\n          \n            β\n          \n        \n      \n    \n    {\\displaystyle F_{\\beta }}\n  \n \"measures the effectiveness of retrieval with respect to a user who attaches \n  \n    \n      \n        β\n      \n    \n    {\\displaystyle \\beta }\n  \n times as much importance to recall as precision\". It is based on Van Rijsbergen's effectiveness measure\n\n  \n    \n      \n        E\n        =\n        1\n        −\n        \n          \n            (\n            \n              \n                \n                  α\n                  p\n                \n              \n              +\n              \n                \n                  \n                    1\n                    −\n                    α\n                  \n                  r\n                \n              \n            \n            )\n          \n          \n            −\n            1\n          \n        \n      \n    \n    {\\displaystyle E=1-\\left({\\frac {\\alpha }{p}}+{\\frac {1-\\alpha }{r}}\\right)^{-1}}\n  \n\nTheir relationship is: \n  \n    \n      \n        \n          F\n          \n            β\n          \n        \n        =\n        1\n        −\n        E\n      \n    \n    {\\displaystyle F_{\\beta }=1-E}\n  \n where \n  \n    \n      \n        α\n        =\n        \n          \n            1\n            \n              1\n              +\n              \n                β\n                \n                  2\n                \n              \n            \n          \n        \n      \n    \n    {\\displaystyle \\alpha ={\\frac {1}{1+\\beta ^{2}}}}\n  \n\n\n== Diagnostic testing ==\nThis is related to the field of binary classification where recall is often termed \"sensitivity\". \n\n\n== Dependence of the F-score on class imbalance ==\nPrecision-recall curve, and thus the \n  \n    \n      \n        \n          F\n          \n            β\n          \n        \n      \n    \n    {\\displaystyle F_{\\beta }}\n  \n score, explicitly depends on the ratio \n\n  \n    \n      \n        r\n      \n    \n    {\\displaystyle r}\n  \n of positive to negative test cases.\nThis means that comparison of the\nF-score across different problems with differing class ratios is\nproblematic. One way to address this issue (see e.g., Siblini et al.,\n2020\n) is to use a standard class ratio \n  \n    \n      \n        \n          r\n          \n            0\n          \n        \n      \n    \n    {\\displaystyle r_{0}}\n  \n when making such comparisons.\n\n\n== Applications ==\nThe F-score is often used in the field of information retrieval for measuring search, document classification, and query classification performance. It is particularly relevant in applications which are primarily concerned with the positive class and where the positive class is rare relative to the negative class.\nEarlier works focused primarily on the F1 score, but with the proliferation of large scale search engines, performance goals changed to place more emphasis on either precision or recall and so \n  \n    \n      \n        \n          F\n          \n            β\n          \n        \n      \n    \n    {\\displaystyle F_{\\beta }}\n  \n is seen in wide application.\nThe F-score is also used in machine learning. However, the F-measures do not take true negatives into account, hence measures such as the Matthews correlation coefficient, Informedness or  Cohen's kappa may be preferred to assess the performance of a binary classifier.\nThe F-score has been widely used in the natural language processing literature, such as in the evaluation of named entity recognition and word segmentation.\n\n\n== Properties ==\nThe F1 score is the Dice coefficient of the set of retrieved items and the set of relevant items.\n\nThe F1-score of a classifier which always predicts the positive class converges to 1 as the probability of the positive class increases.\nThe F1-score of a classifier which always predicts the positive class is equal to 2 * proportion_of_positive_class / ( 1 + proportion_of_positive_class ), since the recall is 1, and the precision is equal to the proportion of the positive class.\nIf the scoring model is uninformative (cannot distinguish between the positive and negative class) then the optimal threshold is 0 so that the positive class is always predicted.\nF1 score is concave in the true positive rate.\n\n\n== Criticism ==\nDavid Hand and others criticize the widespread use of the F1 score since it gives equal importance to precision and recall. In practice, different types of mis-classifications incur different costs. In other words, the relative importance of precision and recall is an aspect of the problem.\nAccording to Davide Chicco and Giuseppe Jurman, the F1 score is less truthful and informative than the Matthews correlation coefficient (MCC) in binary evaluation classification.\nDavid M W Powers has pointed out that F1 ignores the True Negatives and thus is misleading for unbalanced classes, while kappa and correlation measures are symmetric and assess both directions of predictability - the classifier predicting the true class and the true class predicting the classifier prediction, proposing separate multiclass measures Informedness and Markedness for the two directions, noting that their geometric mean is correlation.\nAnother source of critique of F1 is its lack of symmetry. It means it may change its value when dataset labeling is changed - the \"positive\" samples are named \"negative\" and vice versa.\nThis criticism is met by the P4 metric definition, which is sometimes indicated as a symmetrical extension of F1.\nFinally, Ferrer \nand Dyrland et al. \nargue that the expected cost (or its counterpart, the expected utility) is the only principled metric for evaluation of classification decisions, having various advantages over the F-score and the MCC. Both works show that the F-score can result in wrong conclusions about the absolute and relative quality of systems.\n\n\n== Difference from Fowlkes–Mallows index ==\nWhile the F-measure is the harmonic mean of recall and precision, the Fowlkes–Mallows index is their geometric mean.\n\n\n== Extension to multi-class classification ==\nThe F-score is also used for evaluating classification problems with more than two classes (Multiclass classification). A common method is to average the F-score over each class, aiming at a balanced measurement of performance.\n\n\n=== Macro F1 ===\nMacro F1 is a macro-averaged F1 score aiming at a balanced performance measurement. To calculate macro F1, two different averaging-formulas have been used: the F1 score of (arithmetic) class-wise precision and recall means or the arithmetic mean of class-wise F1 scores, where the latter exhibits more desirable properties.\n\n\n=== Micro F1 ===\nMicro F1 is the harmonic mean of micro precision and micro recall. In single-label multi-class classification, micro precision equals micro recall, thus micro F1 is equal to both. However, contrary to a common misconception, micro F1 does not generally equal accuracy, because accuracy takes true negatives into account while micro F1 does not.\n\n\n== See also ==\nBLEU\nConfusion matrix\nHypothesis tests for accuracy\nMETEOR\nNIST (metric)\nReceiver operating characteristic\nROUGE (metric)\nUncertainty coefficient, aka Proficiency\nWord error rate\nLEPOR\n\n\n== References =="
}